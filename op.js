!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).op=t()}(this,(function(){"use strict";function e(){}function t(e){return e()}function r(){return Object.create(null)}function n(e){e.forEach(t)}function o(e){return"function"==typeof e}function i(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function s(t,...r){if(null==t)return e;const n=t.subscribe(...r);return n.unsubscribe?()=>n.unsubscribe():n}function a(e){let t;return s(e,(e=>t=e))(),t}function u(e,t,r){e.$$.on_destroy.push(s(t,r))}function c(e,t,r=t){return e.set(r),t}function l(e){e.parentNode.removeChild(e)}let d;function h(e){d=e}const p=[],m=[],f=[],g=[],b=Promise.resolve();let _=!1;function y(e){f.push(e)}let v=!1;const w=new Set;function k(){if(!v){v=!0;do{for(let e=0;e<p.length;e+=1){const t=p[e];h(t),S(t.$$)}for(h(null),p.length=0;m.length;)m.pop()();for(let e=0;e<f.length;e+=1){const t=f[e];w.has(t)||(w.add(t),t())}f.length=0}while(p.length);for(;g.length;)g.pop()();_=!1,v=!1,w.clear()}}function S(e){if(null!==e.fragment){e.update(),n(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(y)}}const T=new Set;function E(e,t){-1===e.$$.dirty[0]&&(p.push(e),_||(_=!0,b.then(k)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function x(i,s,a,u,c,p,m=[-1]){const f=d;h(i);const g=s.props||{},b=i.$$={fragment:null,ctx:null,props:p,update:e,not_equal:c,bound:r(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(f?f.$$.context:[]),callbacks:r(),dirty:m,skip_bound:!1};let _=!1;if(b.ctx=a?a(i,g,((e,t,...r)=>{const n=r.length?r[0]:t;return b.ctx&&c(b.ctx[e],b.ctx[e]=n)&&(!b.skip_bound&&b.bound[e]&&b.bound[e](n),_&&E(i,e)),t})):[],b.update(),_=!0,n(b.before_update),b.fragment=!!u&&u(b.ctx),s.target){if(s.hydrate){const e=(S=s.target,Array.from(S.childNodes));b.fragment&&b.fragment.l(e),e.forEach(l)}else b.fragment&&b.fragment.c();s.intro&&((v=i.$$.fragment)&&v.i&&(T.delete(v),v.i(w))),function(e,r,i){const{fragment:s,on_mount:a,on_destroy:u,after_update:c}=e.$$;s&&s.m(r,i),y((()=>{const r=a.map(t).filter(o);u?u.push(...r):n(r),e.$$.on_mount=[]})),c.forEach(y)}(i,s.target,s.anchor),k()}var v,w,S;h(f)}const O={AUTH_SERVER_TYPES:{NAKAMA:"nakama"},TOURNEY_SERVER_TYPES:{NAKAMA:"nakama"},SDK_STATES:{NOT_READY:"not_ready",INITIALIZING:"initializing",READY:"ready"},LOGIN_STATES:{LOGGED_OUT:"logged_out",LOGIN_IN_PROGRESS:"login_in_progress",LOGGED_IN:"logged_in"}},C=[];function N(t,r=e){let n;const o=[];function s(e){if(i(t,e)&&(t=e,n)){const e=!C.length;for(let e=0;e<o.length;e+=1){const r=o[e];r[1](),C.push(r,t)}if(e){for(let e=0;e<C.length;e+=2)C[e][0](C[e+1]);C.length=0}}}return{set:s,update:function(e){s(e(t))},subscribe:function(i,a=e){const u=[i,a];return o.push(u),1===o.length&&(n=r(s)||e),i(t),()=>{const e=o.indexOf(u);-1!==e&&o.splice(e,1),0===o.length&&(n(),n=null)}}}}var I="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function P(e,t,r){return e(r={path:t,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==t&&r.path)}},r.exports),r.exports}var A,F=P((function(e){!function(e,t,r){function n(e){var t,r=this,n=(t=4022871197,function(e){e=String(e);for(var r=0;r<e.length;r++){var n=.02519603282416938*(t+=e.charCodeAt(r));n-=t=n>>>0,t=(n*=t)>>>0,t+=4294967296*(n-=t)}return 2.3283064365386963e-10*(t>>>0)});r.next=function(){var e=2091639*r.s0+2.3283064365386963e-10*r.c;return r.s0=r.s1,r.s1=r.s2,r.s2=e-(r.c=0|e)},r.c=1,r.s0=n(" "),r.s1=n(" "),r.s2=n(" "),r.s0-=n(e),r.s0<0&&(r.s0+=1),r.s1-=n(e),r.s1<0&&(r.s1+=1),r.s2-=n(e),r.s2<0&&(r.s2+=1),n=null}function o(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function i(e,t){var r=new n(e),i=t&&t.state,s=r.next;return s.int32=function(){return 4294967296*r.next()|0},s.double=function(){return s()+11102230246251565e-32*(2097152*s()|0)},s.quick=s,i&&("object"==typeof i&&o(i,r),s.state=function(){return o(r,{})}),s}t&&t.exports?t.exports=i:r&&r.amd?r((function(){return i})):this.alea=i}(0,e,!1)})),R=P((function(e){!function(e,t,r){function n(e){var t=this,r="";t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var e=t.x^t.x<<11;return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w>>>19^e^e>>>8},e===(0|e)?t.x=e:r+=e;for(var n=0;n<r.length+64;n++)t.x^=0|r.charCodeAt(n),t.next()}function o(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}function i(e,t){var r=new n(e),i=t&&t.state,s=function(){return(r.next()>>>0)/4294967296};return s.double=function(){do{var e=((r.next()>>>11)+(r.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},s.int32=r.next,s.quick=s,i&&("object"==typeof i&&o(i,r),s.state=function(){return o(r,{})}),s}t&&t.exports?t.exports=i:r&&r.amd?r((function(){return i})):this.xor128=i}(0,e,!1)})),U=P((function(e){!function(e,t,r){function n(e){var t=this,r="";t.next=function(){var e=t.x^t.x>>>2;return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v<<4^e^e<<1)|0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,e===(0|e)?t.x=e:r+=e;for(var n=0;n<r.length+64;n++)t.x^=0|r.charCodeAt(n),n==r.length&&(t.d=t.x<<10^t.x>>>4),t.next()}function o(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t.v=e.v,t.d=e.d,t}function i(e,t){var r=new n(e),i=t&&t.state,s=function(){return(r.next()>>>0)/4294967296};return s.double=function(){do{var e=((r.next()>>>11)+(r.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},s.int32=r.next,s.quick=s,i&&("object"==typeof i&&o(i,r),s.state=function(){return o(r,{})}),s}t&&t.exports?t.exports=i:r&&r.amd?r((function(){return i})):this.xorwow=i}(0,e,!1)})),j=P((function(e){!function(e,t,r){function n(e){var t=this;t.next=function(){var e,r,n=t.x,o=t.i;return e=n[o],r=(e^=e>>>7)^e<<24,r^=(e=n[o+1&7])^e>>>10,r^=(e=n[o+3&7])^e>>>3,r^=(e=n[o+4&7])^e<<7,e=n[o+7&7],r^=(e^=e<<13)^e<<9,n[o]=r,t.i=o+1&7,r},function(e,t){var r,n=[];if(t===(0|t))n[0]=t;else for(t=""+t,r=0;r<t.length;++r)n[7&r]=n[7&r]<<15^t.charCodeAt(r)+n[r+1&7]<<13;for(;n.length<8;)n.push(0);for(r=0;r<8&&0===n[r];++r);for(8==r?n[7]=-1:n[r],e.x=n,e.i=0,r=256;r>0;--r)e.next()}(t,e)}function o(e,t){return t.x=e.x.slice(),t.i=e.i,t}function i(e,t){null==e&&(e=+new Date);var r=new n(e),i=t&&t.state,s=function(){return(r.next()>>>0)/4294967296};return s.double=function(){do{var e=((r.next()>>>11)+(r.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},s.int32=r.next,s.quick=s,i&&(i.x&&o(i,r),s.state=function(){return o(r,{})}),s}t&&t.exports?t.exports=i:r&&r.amd?r((function(){return i})):this.xorshift7=i}(0,e,!1)})),G=P((function(e){!function(e,t,r){function n(e){var t=this;t.next=function(){var e,r,n=t.w,o=t.X,i=t.i;return t.w=n=n+1640531527|0,r=o[i+34&127],e=o[i=i+1&127],r^=r<<13,e^=e<<17,r^=r>>>15,e^=e>>>12,r=o[i]=r^e,t.i=i,r+(n^n>>>16)|0},function(e,t){var r,n,o,i,s,a=[],u=128;for(t===(0|t)?(n=t,t=null):(t+="\0",n=0,u=Math.max(u,t.length)),o=0,i=-32;i<u;++i)t&&(n^=t.charCodeAt((i+32)%t.length)),0===i&&(s=n),n^=n<<10,n^=n>>>15,n^=n<<4,n^=n>>>13,i>=0&&(s=s+1640531527|0,o=0==(r=a[127&i]^=n+s)?o+1:0);for(o>=128&&(a[127&(t&&t.length||0)]=-1),o=127,i=512;i>0;--i)n=a[o+34&127],r=a[o=o+1&127],n^=n<<13,r^=r<<17,n^=n>>>15,r^=r>>>12,a[o]=n^r;e.w=s,e.X=a,e.i=o}(t,e)}function o(e,t){return t.i=e.i,t.w=e.w,t.X=e.X.slice(),t}function i(e,t){null==e&&(e=+new Date);var r=new n(e),i=t&&t.state,s=function(){return(r.next()>>>0)/4294967296};return s.double=function(){do{var e=((r.next()>>>11)+(r.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},s.int32=r.next,s.quick=s,i&&(i.X&&o(i,r),s.state=function(){return o(r,{})}),s}t&&t.exports?t.exports=i:r&&r.amd?r((function(){return i})):this.xor4096=i}(0,e,!1)})),q=P((function(e){!function(e,t,r){function n(e){var t=this,r="";t.next=function(){var e=t.b,r=t.c,n=t.d,o=t.a;return e=e<<25^e>>>7^r,r=r-n|0,n=n<<24^n>>>8^o,o=o-e|0,t.b=e=e<<20^e>>>12^r,t.c=r=r-n|0,t.d=n<<16^r>>>16^o,t.a=o-e|0},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,e===Math.floor(e)?(t.a=e/4294967296|0,t.b=0|e):r+=e;for(var n=0;n<r.length+20;n++)t.b^=0|r.charCodeAt(n),t.next()}function o(e,t){return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t}function i(e,t){var r=new n(e),i=t&&t.state,s=function(){return(r.next()>>>0)/4294967296};return s.double=function(){do{var e=((r.next()>>>11)+(r.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},s.int32=r.next,s.quick=s,i&&("object"==typeof i&&o(i,r),s.state=function(){return o(r,{})}),s}t&&t.exports?t.exports=i:r&&r.amd?r((function(){return i})):this.tychei=i}(0,e,!1)})),L=(A=Object.freeze({__proto__:null,default:{}}))&&A.default||A,D=P((function(e){!function(t,r,n){var o,i=256,s=n.pow(i,6),a=n.pow(2,52),u=2*a,c=255;function l(e,c,l){var g=[],b=m(p((c=1==c?{entropy:!0}:c||{}).entropy?[e,f(r)]:null==e?function(){try{var e;return o&&(e=o.randomBytes)?e=e(i):(e=new Uint8Array(i),(t.crypto||t.msCrypto).getRandomValues(e)),f(e)}catch(e){var n=t.navigator,s=n&&n.plugins;return[+new Date,t,s,t.screen,f(r)]}}():e,3),g),_=new d(g),y=function(){for(var e=_.g(6),t=s,r=0;e<a;)e=(e+r)*i,t*=i,r=_.g(1);for(;e>=u;)e/=2,t/=2,r>>>=1;return(e+r)/t};return y.int32=function(){return 0|_.g(4)},y.quick=function(){return _.g(4)/4294967296},y.double=y,m(f(_.S),r),(c.pass||l||function(e,t,r,o){return o&&(o.S&&h(o,_),e.state=function(){return h(_,{})}),r?(n.random=e,t):e})(y,b,"global"in c?c.global:this==n,c.state)}function d(e){var t,r=e.length,n=this,o=0,s=n.i=n.j=0,a=n.S=[];for(r||(e=[r++]);o<i;)a[o]=o++;for(o=0;o<i;o++)a[o]=a[s=c&s+e[o%r]+(t=a[o])],a[s]=t;(n.g=function(e){for(var t,r=0,o=n.i,s=n.j,a=n.S;e--;)t=a[o=c&o+1],r=r*i+a[c&(a[o]=a[s=c&s+t])+(a[s]=t)];return n.i=o,n.j=s,r})(i)}function h(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function p(e,t){var r,n=[],o=typeof e;if(t&&"object"==o)for(r in e)try{n.push(p(e[r],t-1))}catch(e){}return n.length?n:"string"==o?e:e+"\0"}function m(e,t){for(var r,n=e+"",o=0;o<n.length;)t[c&o]=c&(r^=19*t[c&o])+n.charCodeAt(o++);return f(t)}function f(e){return String.fromCharCode.apply(0,e)}if(m(n.random(),r),e.exports){e.exports=l;try{o=L}catch(e){}}else n.seedrandom=l}("undefined"!=typeof self?self:I,[],Math)}));D.alea=F,D.xor128=R,D.xorwow=U,D.xorshift7=j,D.xor4096=G,D.tychei=q;var J=D;const $=1,M=2,B=3,z=4,H=10;const Y=new class{constructor(){this.log=[],this.sessionId=null,this.ws=null,this.seedrandom=null,this.mode=1,this.replicationHandlers=new Map,this.replicationEventListeners=new Map,this.clickHandlers=new Map,this.mouseDownHandlers=new Map,this.mouseUpHandlers=new Map,this.mouseMoveHandlers=new Map,this.gameInitFunction=null,this.gameReady=!1,this.lastClientNow=0,this.lastClientNowUpdateTime=0,this.passiveEventRegistry=new Map,this.replicationPaused=!1}initSession=(e,t)=>{console.log(`OP Arcade init session: ${t}`),this.sessionId=t;const r=`ws://${e}?sessionId=${this.sessionId}`;this.ws=new WebSocket(r),this.ws.onopen=e=>{console.log("WebSocket open:"),console.log(e),this.ws.onmessage=e=>{console.log("WebSocket message:"),console.log(e.data),"scoreSubmitted"===e.data&&this.refreshPage()}},this.ws.onerror=e=>{console.error("WebSocket error"),console.error(e)},this.serverSendQueue(),this.gameInitFunction&&(console.log("OP Arcade calling init game function."),this.gameInitFunction())};closeSession=()=>{this.mode=1,this.ws.close()};initGame=(e=null)=>{console.log("OP Arcade init game."),this.gameInitFunction=e,this.sessionId&&(console.log("OP Arcade calling init game function."),this.gameInitFunction())};postScore=async e=>window.postScoreHandler?await window.postScoreHandler(e):null;serverSendQueue=()=>{K(this.serverSendQueue),this.ws&&1===this.ws.readyState&&this.ws&&this.log.length>0&&(this.ws.send(JSON.stringify(this.log)),this.log.length=0)};replicate=async e=>{const t=e.e;if(9===t)return Y.catchPassiveEvent(e.id,!0),!0;if(this.replicationPaused)return!1;e.t&&(this.lastClientNow=e.t,this.lastClientNowUpdateTime=window.performance.now());let r=null;if([$,M,B,z,H].includes(t)&&(r=this.replicationHandlers.get(t),!r))return!0;let n=null;if(8===t&&(n=this.findReplicationListenerHandler(e),!n))return console.error(`Handler for event ${t} not found!`),!0;switch(t){case 5:this.initSeedrandom(e.s);break;case $:r(e.t);break;case H:case M:case B:case z:r({clientX:e.clientX,clientY:e.clientY,pageX:e.pageX,pageY:e.pageY});break;case 8:n({target:document.getElementById(e.tid),type:e.type,keyCode:e.kc,preventDefault:()=>{},pageX:e.px,pageY:e.py,timeStamp:e.ts,ctrlKey:e.ck,button:e.b,movementX:e.mx,movementY:e.my})}return!0};startReplicating=()=>{this.mode=3};startPlay=(e,t)=>{1===this.mode&&(this.mode=2,this.sendEvent(7,{w:e,h:t}),this.initSeedrandom())};stopPlay=()=>{2===this.mode&&(this.mode=1,this.log=[])};sendEvent=(e,t)=>{if(2!==this.mode)return;const r={e:e,...t};r.t||(r.t=window.performance.now()),this.log.push(r)};setViewport=(e,t)=>{this.sendEvent(6,{w:e,h:t})};initSeedrandom=e=>{const t=e||Math.random().toString();this.seedrandom=new J(t),this.sendEvent(5,{s:t})};random=()=>this.seedrandom();requestAnimationFrame=e=>{if(3!==this.mode)return window.requestAnimationFrame((t=>{this.sendEvent($,{t:t}),e(t)}));this.replicationHandlers.set($,e)};addOnClick=(e,t)=>{if(3===this.mode)return void this.replicationHandlers.set(H,t);const r=e=>{this.sendEvent(H,{clientX:e.clientX,clientY:e.clientY,pageX:e.pageX,pageY:e.pageY}),t(e)};e.onclick=r,this.addPerElementHandler(this.clickHandlers,e,r)};addOnMouseDown=(e,t)=>{if(3===this.mode)return void this.replicationHandlers.set(M,t);const r=e=>{this.sendEvent(M,{clientX:e.clientX,clientY:e.clientY,pageX:e.pageX,pageY:e.pageY}),t(e)};e.onmousedown=r,this.addPerElementHandler(this.mouseDownHandlers,e,r)};addOnMouseUp=(e,t)=>{if(3===this.mode)return void this.replicationHandlers.set(B,t);const r=e=>{this.sendEvent(B,{clientX:e.clientX,clientY:e.clientY,pageX:e.pageX,pageY:e.pageY}),t(e)};e.onmouseup=r,this.addPerElementHandler(this.mouseUpHandlers,e,r)};addOnMouseMove=(e,t)=>{if(console.log("addOnMouseMove"),3===this.mode)return void this.replicationHandlers.set(z,t);const r=e=>{this.sendEvent(z,{clientX:e.clientX,clientY:e.clientY,pageX:e.pageX,pageY:e.pageY}),t(e)};e.onmousemove=r,this.addPerElementHandler(this.mouseMoveHandlers,e,r)};addPerElementHandler=(e,t,r)=>{let n=e.get(t);n||(n=[]),n.push(r),e.set(t,n)};addEventListener=(e,t,r)=>{if(3===this.mode)return void this.saveReplicationListenerHandler(e,t,r);e.addEventListener(t,(n=>{this.sendEvent(8,{t:n.type,oid:e.id||null,w:e===window,en:t,tid:n.target&&n.target.id||null,kc:n.keyCode,px:n.pageX,py:n.pageY,ts:n.timeStamp,ck:n.ctrlKey,b:n.button,mx:n.movementX,my:n.movementY}),r(n)}))};saveReplicationListenerHandler=(e,t,r)=>{this.replicationEventListeners.has(e)||this.replicationEventListeners.set(e,new Map);this.replicationEventListeners.get(e).set(t,r)};findReplicationListenerHandler=e=>{const t=e.w?window:document.getElementById(e.oid),r=this.replicationEventListeners.get(t);return r?r.get(e.en):null};refreshPage=()=>{setTimeout((()=>window.top.postMessage("refreshPage","*")),500)};now=()=>3===this.mode?this.lastClientNow+(window.performance.now()-this.lastClientNowUpdateTime):window.performance.now();firePassiveEvent=e=>{3!==this.mode?this.sendEvent(9,{id:e}):this.catchPassiveEvent(e,!1)};catchPassiveEvent=(e,t)=>{if(console.log(`catchPassiveEvent: ${e}, fromClient: ${t.toString()}`),this.passiveEventRegistry.has(e)){const r=this.passiveEventRegistry.get(e);t?r.client=!0:r.server=!0}else this.passiveEventRegistry.set(e,{client:t,server:!t});this.replicationPaused=[...this.passiveEventRegistry.entries()].some((([e,t])=>t.client&&!t.server)),console.log(`replicationPaused: ${this.replicationPaused.toString()}`)}},X=(e,t)=>Y.initSession(e,t),K=e=>Y.requestAnimationFrame(e);var V=Object.freeze({__proto__:null,idleMode:1,playingMode:2,replicatingMode:3,initSession:X,initGame:e=>Y.initGame(e),startPlay:(e,t)=>Y.startPlay(e,t),stopPlay:()=>Y.stopPlay(),setPostScoreHandler:e=>Y.setPostScoreHandler(e),postScore:e=>Y.postScore(e),setViewport:(e,t)=>Y.setViewport(e,t),startReplicating:()=>Y.startReplicating(),replicate:e=>Y.replicate(e),random:()=>Y.random(),requestAnimationFrame:K,addOnClick:(e,t)=>Y.addOnClick(e,t),addOnMouseDown:(e,t)=>Y.addOnMouseDown(e,t),removeOnMouseDown:(e,t)=>{},addOnMouseUp:(e,t)=>Y.addOnMouseUp(e,t),removeOnMouseUp:(e,t)=>{},addOnMouseMove:(e,t)=>Y.addOnMouseMove(e,t),addEventListener:(e,t,r)=>Y.addEventListener(e,t,r),now:()=>Y.now(),firePassiveEvent:e=>Y.firePassiveEvent(e)}),Z=Object.create,W=Object.defineProperty,Q=Object.getPrototypeOf,ee=Object.prototype.hasOwnProperty,te=Object.getOwnPropertyNames,re=Object.getOwnPropertyDescriptor,ne=Object.assign,oe=(e,t,r)=>{if((e=>{W(e,"__esModule",{value:!0})})(e),t&&"object"==typeof t||"function"==typeof t)for(let n of te(t))ee.call(e,n)||"default"===n||W(e,n,{get:()=>t[n],enumerable:!(r=re(t,n))||r.enumerable});return e},ie=(e,t,r)=>new Promise(((n,o)=>{var i=e=>{try{a(r.next(e))}catch(e){o(e)}},s=e=>{try{a(r.throw(e))}catch(e){o(e)}},a=e=>e.done?n(e.value):Promise.resolve(e.value).then(i,s);a((r=r.apply(e,t)).next())})),se=((e=>{e&&e.__esModule||oe(W(null!=e?Z(Q(e)):{},"default",{value:e,enumerable:!0}),e)})(((e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports))((e=>{!function(e){if(!e.fetch){var t="URLSearchParams"in e,r="Symbol"in e&&"iterator"in Symbol,n="FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),o="FormData"in e,i="ArrayBuffer"in e;if(i)var s=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],a=function(e){return e&&DataView.prototype.isPrototypeOf(e)},u=ArrayBuffer.isView||function(e){return e&&s.indexOf(Object.prototype.toString.call(e))>-1};m.prototype.append=function(e,t){e=d(e),t=h(t);var r=this.map[e];this.map[e]=r?r+","+t:t},m.prototype.delete=function(e){delete this.map[d(e)]},m.prototype.get=function(e){return e=d(e),this.has(e)?this.map[e]:null},m.prototype.has=function(e){return this.map.hasOwnProperty(d(e))},m.prototype.set=function(e,t){this.map[d(e)]=h(t)},m.prototype.forEach=function(e,t){for(var r in this.map)this.map.hasOwnProperty(r)&&e.call(t,this.map[r],r,this)},m.prototype.keys=function(){var e=[];return this.forEach((function(t,r){e.push(r)})),p(e)},m.prototype.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),p(e)},m.prototype.entries=function(){var e=[];return this.forEach((function(t,r){e.push([r,t])})),p(e)},r&&(m.prototype[Symbol.iterator]=m.prototype.entries);var c=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];v.prototype.clone=function(){return new v(this,{body:this._bodyInit})},y.call(v.prototype),y.call(k.prototype),k.prototype.clone=function(){return new k(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new m(this.headers),url:this.url})},k.error=function(){var e=new k(null,{status:0,statusText:""});return e.type="error",e};var l=[301,302,303,307,308];k.redirect=function(e,t){if(-1===l.indexOf(t))throw new RangeError("Invalid status code");return new k(null,{status:t,headers:{location:e}})},e.Headers=m,e.Request=v,e.Response=k,e.fetch=function(e,t){return new Promise((function(r,o){var i=new v(e,t),s=new XMLHttpRequest;s.onload=function(){var e,t,n={status:s.status,statusText:s.statusText,headers:(e=s.getAllResponseHeaders()||"",t=new m,e.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach((function(e){var r=e.split(":"),n=r.shift().trim();if(n){var o=r.join(":").trim();t.append(n,o)}})),t)};n.url="responseURL"in s?s.responseURL:n.headers.get("X-Request-URL");var o="response"in s?s.response:s.responseText;r(new k(o,n))},s.onerror=function(){o(new TypeError("Network request failed"))},s.ontimeout=function(){o(new TypeError("Network request failed"))},s.open(i.method,i.url,!0),"include"===i.credentials?s.withCredentials=!0:"omit"===i.credentials&&(s.withCredentials=!1),"responseType"in s&&n&&(s.responseType="blob"),i.headers.forEach((function(e,t){s.setRequestHeader(t,e)})),s.send(void 0===i._bodyInit?null:i._bodyInit)}))},e.fetch.polyfill=!0}function d(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function h(e){return"string"!=typeof e&&(e=String(e)),e}function p(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return r&&(t[Symbol.iterator]=function(){return t}),t}function m(e){this.map={},e instanceof m?e.forEach((function(e,t){this.append(t,e)}),this):Array.isArray(e)?e.forEach((function(e){this.append(e[0],e[1])}),this):e&&Object.getOwnPropertyNames(e).forEach((function(t){this.append(t,e[t])}),this)}function f(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function g(e){return new Promise((function(t,r){e.onload=function(){t(e.result)},e.onerror=function(){r(e.error)}}))}function b(e){var t=new FileReader,r=g(t);return t.readAsArrayBuffer(e),r}function _(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function y(){return this.bodyUsed=!1,this._initBody=function(e){if(this._bodyInit=e,e)if("string"==typeof e)this._bodyText=e;else if(n&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(o&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(t&&URLSearchParams.prototype.isPrototypeOf(e))this._bodyText=e.toString();else if(i&&n&&a(e))this._bodyArrayBuffer=_(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!i||!ArrayBuffer.prototype.isPrototypeOf(e)&&!u(e))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=_(e)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):t&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},n&&(this.blob=function(){var e=f(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?f(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(b)}),this.text=function(){var e,t,r,n=f(this);if(n)return n;if(this._bodyBlob)return e=this._bodyBlob,t=new FileReader,r=g(t),t.readAsText(e),r;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),r=new Array(t.length),n=0;n<t.length;n++)r[n]=String.fromCharCode(t[n]);return r.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},o&&(this.formData=function(){return this.text().then(w)}),this.json=function(){return this.text().then(JSON.parse)},this}function v(e,t){var r,n,o=(t=t||{}).body;if(e instanceof v){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new m(e.headers)),this.method=e.method,this.mode=e.mode,o||null==e._bodyInit||(o=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"omit",!t.headers&&this.headers||(this.headers=new m(t.headers)),this.method=(r=t.method||this.method||"GET",n=r.toUpperCase(),c.indexOf(n)>-1?n:r),this.mode=t.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&o)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(o)}function w(e){var t=new FormData;return e.trim().split("&").forEach((function(e){if(e){var r=e.split("="),n=r.shift().replace(/\+/g," "),o=r.join("=").replace(/\+/g," ");t.append(decodeURIComponent(n),decodeURIComponent(o))}})),t}function k(e,t){t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new m(t.headers),this.url=t.url||"",this._initBody(e)}}("undefined"!=typeof self?self:e)}))()),"function"==typeof atob),ae="function"==typeof btoa,ue="function"==typeof Buffer,ce="function"==typeof TextDecoder?new TextDecoder:void 0,le="function"==typeof TextEncoder?new TextEncoder:void 0,de=[..."ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="],he=(e=>{let t={};return e.forEach(((e,r)=>t[e]=r)),t})(de),pe=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,me=String.fromCharCode.bind(String),fe="function"==typeof Uint8Array.from?Uint8Array.from.bind(Uint8Array):(e,t=(e=>e))=>new Uint8Array(Array.prototype.slice.call(e,0).map(t)),ge=e=>e.replace(/[^A-Za-z0-9\+\/]/g,""),be=ae?e=>btoa(e):ue?e=>Buffer.from(e,"binary").toString("base64"):e=>{let t,r,n,o,i="";const s=e.length%3;for(let s=0;s<e.length;){if((r=e.charCodeAt(s++))>255||(n=e.charCodeAt(s++))>255||(o=e.charCodeAt(s++))>255)throw new TypeError("invalid character found");t=r<<16|n<<8|o,i+=de[t>>18&63]+de[t>>12&63]+de[t>>6&63]+de[63&t]}return s?i.slice(0,s-3)+"===".substring(s):i},_e=ue?e=>Buffer.from(e).toString("base64"):e=>{let t=[];for(let r=0,n=e.length;r<n;r+=4096)t.push(me.apply(null,e.subarray(r,r+4096)));return be(t.join(""))},ye=e=>{if(e.length<2)return(t=e.charCodeAt(0))<128?e:t<2048?me(192|t>>>6)+me(128|63&t):me(224|t>>>12&15)+me(128|t>>>6&63)+me(128|63&t);var t=65536+1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320);return me(240|t>>>18&7)+me(128|t>>>12&63)+me(128|t>>>6&63)+me(128|63&t)},ve=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,we=ue?e=>Buffer.from(e,"utf8").toString("base64"):le?e=>_e(le.encode(e)):e=>be(e.replace(ve,ye)),ke=(e,t=!1)=>t?(e=>e.replace(/[+\/]/g,(e=>"+"==e?"-":"_")).replace(/=+$/m,""))(we(e)):we(e),Se=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,Te=e=>{switch(e.length){case 4:var t=((7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3))-65536;return me(55296+(t>>>10))+me(56320+(1023&t));case 3:return me((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return me((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},Ee=se?e=>atob(ge(e)):ue?e=>Buffer.from(e,"base64").toString("binary"):e=>{if(e=e.replace(/\s+/g,""),!pe.test(e))throw new TypeError("malformed base64.");e+="==".slice(2-(3&e.length));let t,r,n,o="";for(let i=0;i<e.length;)t=he[e.charAt(i++)]<<18|he[e.charAt(i++)]<<12|(r=he[e.charAt(i++)])<<6|(n=he[e.charAt(i++)]),o+=64===r?me(t>>16&255):64===n?me(t>>16&255,t>>8&255):me(t>>16&255,t>>8&255,255&t);return o},xe=ue?e=>fe(Buffer.from(e,"base64")):e=>fe(Ee(e),(e=>e.charCodeAt(0))),Oe=ue?e=>Buffer.from(e,"base64").toString("utf8"):ce?e=>ce.decode(xe(e)):e=>Ee(e).replace(Se,Te),Ce=e=>Oe(ge(e.replace(/[-_]/g,(e=>"-"==e?"+":"/")))),Ne=class{constructor(e,t,r,n,o,i){this.token=e,this.created_at=t,this.expires_at=r,this.username=n,this.user_id=o,this.vars=i}isexpired(e){return this.expires_at-e<0}static restore(e){const t=Math.floor((new Date).getTime()/1e3),r=e.split(".");if(3!=r.length)throw"jwt is not valid.";const n=JSON.parse(atob(r[1])),o=Math.floor(parseInt(n.exp));return new Ne(e,t,o,n.usn,n.uid,n.vrs)}},Ie=class{constructor(){this._isConnected=!1}get onClose(){return this._socket.onclose}set onClose(e){this._socket.onclose=e}get onError(){return this._socket.onerror}set onError(e){this._socket.onerror=e}get onMessage(){return this._socket.onmessage}set onMessage(e){e?this._socket.onmessage=t=>{const r=JSON.parse(t.data);e(r)}:e=null}get onOpen(){return this._socket.onopen}set onOpen(e){this._socket.onopen=e}get isConnected(){return this._isConnected}connect(e,t,r,n,o){const i=`${e}${t}:${r}/ws?lang=en&status=${encodeURIComponent(n.toString())}&token=${encodeURIComponent(o)}`;this._socket=new WebSocket(i),this._isConnected=!0}close(){this._isConnected=!1,this._socket.close(),this._socket=void 0}send(e){e.match_data_send&&(e.match_data_send.op_code=e.match_data_send.op_code.toString()),this._socket.send(JSON.stringify(e))}};var Pe=class{constructor(e="defaultkey",t="127.0.0.1",r="7350",n=!1,o=7e3){this.serverkey=e,this.host=t,this.port=r,this.useSSL=n,this.timeout=o;const i=`${n?"https://":"http://"}${t}:${r}`;this.configuration={basePath:i,username:e,password:"",timeoutMs:o},this.apiClient=new class{constructor(e){this.configuration=e}doFetch(e,t,r,n,o){const i="?"+Object.keys(r).map((e=>r[e]instanceof Array?r[e].reduce(((t,r)=>t+encodeURIComponent(e)+"="+encodeURIComponent(r)+"&"),""):null!=r[e]?encodeURIComponent(e)+"="+encodeURIComponent(r[e])+"&":void 0)).join(""),s=ne(ne({},{method:t}),o);s.headers=ne({},o.headers);const a=Object.getOwnPropertyDescriptor(XMLHttpRequest.prototype,"withCredentials");return(null==a?void 0:a.set)||(s.credentials="cocos-ignore"),this.configuration.bearerToken?s.headers.Authorization="Bearer "+this.configuration.bearerToken:this.configuration.username&&(s.headers.Authorization="Basic "+ke(this.configuration.username+":"+this.configuration.password)),Object.keys(s.headers).includes("Accept")||(s.headers.Accept="application/json"),Object.keys(s.headers).includes("Content-Type")||(s.headers["Content-Type"]="application/json"),Object.keys(s.headers).forEach((e=>{s.headers[e]||delete s.headers[e]})),s.body=n,Promise.race([fetch(this.configuration.basePath+e+i,s).then((e=>{if(204==e.status)return e;if(e.status>=200&&e.status<300)return e.json();throw e})),new Promise(((e,t)=>setTimeout(t,this.configuration.timeoutMs,"Request timed out.")))])}healthcheck(e={}){return this.doFetch("/healthcheck","GET",{},null,e)}getAccount(e={}){return this.doFetch("/v2/account","GET",{},null,e)}updateAccount(e,t={}){if(null==e)throw new Error("'body' is a required parameter but is null or undefined.");let r=null;return r=JSON.stringify(e||{}),this.doFetch("/v2/account","PUT",{},r,t)}authenticateApple(e,t,r,n={}){if(null==e)throw new Error("'body' is a required parameter but is null or undefined.");const o={create:t,username:r};let i=null;return i=JSON.stringify(e||{}),this.doFetch("/v2/account/authenticate/apple","POST",o,i,n)}authenticateCustom(e,t,r,n={}){if(null==e)throw new Error("'body' is a required parameter but is null or undefined.");const o={create:t,username:r};let i=null;return i=JSON.stringify(e||{}),this.doFetch("/v2/account/authenticate/custom","POST",o,i,n)}authenticateDevice(e,t,r,n={}){if(null==e)throw new Error("'body' is a required parameter but is null or undefined.");const o={create:t,username:r};let i=null;return i=JSON.stringify(e||{}),this.doFetch("/v2/account/authenticate/device","POST",o,i,n)}authenticateEmail(e,t,r,n={}){if(null==e)throw new Error("'body' is a required parameter but is null or undefined.");const o={create:t,username:r};let i=null;return i=JSON.stringify(e||{}),this.doFetch("/v2/account/authenticate/email","POST",o,i,n)}authenticateFacebook(e,t,r,n,o={}){if(null==e)throw new Error("'body' is a required parameter but is null or undefined.");const i={create:t,username:r,sync:n};let s=null;return s=JSON.stringify(e||{}),this.doFetch("/v2/account/authenticate/facebook","POST",i,s,o)}authenticateFacebookInstantGame(e,t,r,n={}){if(null==e)throw new Error("'body' is a required parameter but is null or undefined.");const o={create:t,username:r};let i=null;return i=JSON.stringify(e||{}),this.doFetch("/v2/account/authenticate/facebookinstantgame","POST",o,i,n)}authenticateGameCenter(e,t,r,n={}){if(null==e)throw new Error("'body' is a required parameter but is null or undefined.");const o={create:t,username:r};let i=null;return i=JSON.stringify(e||{}),this.doFetch("/v2/account/authenticate/gamecenter","POST",o,i,n)}authenticateGoogle(e,t,r,n={}){if(null==e)throw new Error("'body' is a required parameter but is null or undefined.");const o={create:t,username:r};let i=null;return i=JSON.stringify(e||{}),this.doFetch("/v2/account/authenticate/google","POST",o,i,n)}authenticateSteam(e,t,r,n={}){if(null==e)throw new Error("'body' is a required parameter but is null or undefined.");const o={create:t,username:r};let i=null;return i=JSON.stringify(e||{}),this.doFetch("/v2/account/authenticate/steam","POST",o,i,n)}linkApple(e,t={}){if(null==e)throw new Error("'body' is a required parameter but is null or undefined.");let r=null;return r=JSON.stringify(e||{}),this.doFetch("/v2/account/link/apple","POST",{},r,t)}linkCustom(e,t={}){if(null==e)throw new Error("'body' is a required parameter but is null or undefined.");let r=null;return r=JSON.stringify(e||{}),this.doFetch("/v2/account/link/custom","POST",{},r,t)}linkDevice(e,t={}){if(null==e)throw new Error("'body' is a required parameter but is null or undefined.");let r=null;return r=JSON.stringify(e||{}),this.doFetch("/v2/account/link/device","POST",{},r,t)}linkEmail(e,t={}){if(null==e)throw new Error("'body' is a required parameter but is null or undefined.");let r=null;return r=JSON.stringify(e||{}),this.doFetch("/v2/account/link/email","POST",{},r,t)}linkFacebook(e,t,r={}){if(null==e)throw new Error("'body' is a required parameter but is null or undefined.");const n={sync:t};let o=null;return o=JSON.stringify(e||{}),this.doFetch("/v2/account/link/facebook","POST",n,o,r)}linkFacebookInstantGame(e,t={}){if(null==e)throw new Error("'body' is a required parameter but is null or undefined.");let r=null;return r=JSON.stringify(e||{}),this.doFetch("/v2/account/link/facebookinstantgame","POST",{},r,t)}linkGameCenter(e,t={}){if(null==e)throw new Error("'body' is a required parameter but is null or undefined.");let r=null;return r=JSON.stringify(e||{}),this.doFetch("/v2/account/link/gamecenter","POST",{},r,t)}linkGoogle(e,t={}){if(null==e)throw new Error("'body' is a required parameter but is null or undefined.");let r=null;return r=JSON.stringify(e||{}),this.doFetch("/v2/account/link/google","POST",{},r,t)}linkSteam(e,t={}){if(null==e)throw new Error("'body' is a required parameter but is null or undefined.");let r=null;return r=JSON.stringify(e||{}),this.doFetch("/v2/account/link/steam","POST",{},r,t)}sessionRefresh(e,t={}){if(null==e)throw new Error("'body' is a required parameter but is null or undefined.");let r=null;return r=JSON.stringify(e||{}),this.doFetch("/v2/account/session/refresh","POST",{},r,t)}unlinkApple(e,t={}){if(null==e)throw new Error("'body' is a required parameter but is null or undefined.");let r=null;return r=JSON.stringify(e||{}),this.doFetch("/v2/account/unlink/apple","POST",{},r,t)}unlinkCustom(e,t={}){if(null==e)throw new Error("'body' is a required parameter but is null or undefined.");let r=null;return r=JSON.stringify(e||{}),this.doFetch("/v2/account/unlink/custom","POST",{},r,t)}unlinkDevice(e,t={}){if(null==e)throw new Error("'body' is a required parameter but is null or undefined.");let r=null;return r=JSON.stringify(e||{}),this.doFetch("/v2/account/unlink/device","POST",{},r,t)}unlinkEmail(e,t={}){if(null==e)throw new Error("'body' is a required parameter but is null or undefined.");let r=null;return r=JSON.stringify(e||{}),this.doFetch("/v2/account/unlink/email","POST",{},r,t)}unlinkFacebook(e,t={}){if(null==e)throw new Error("'body' is a required parameter but is null or undefined.");let r=null;return r=JSON.stringify(e||{}),this.doFetch("/v2/account/unlink/facebook","POST",{},r,t)}unlinkFacebookInstantGame(e,t={}){if(null==e)throw new Error("'body' is a required parameter but is null or undefined.");let r=null;return r=JSON.stringify(e||{}),this.doFetch("/v2/account/unlink/facebookinstantgame","POST",{},r,t)}unlinkGameCenter(e,t={}){if(null==e)throw new Error("'body' is a required parameter but is null or undefined.");let r=null;return r=JSON.stringify(e||{}),this.doFetch("/v2/account/unlink/gamecenter","POST",{},r,t)}unlinkGoogle(e,t={}){if(null==e)throw new Error("'body' is a required parameter but is null or undefined.");let r=null;return r=JSON.stringify(e||{}),this.doFetch("/v2/account/unlink/google","POST",{},r,t)}unlinkSteam(e,t={}){if(null==e)throw new Error("'body' is a required parameter but is null or undefined.");let r=null;return r=JSON.stringify(e||{}),this.doFetch("/v2/account/unlink/steam","POST",{},r,t)}listChannelMessages(e,t,r,n,o={}){if(null==e)throw new Error("'channelId' is a required parameter but is null or undefined.");const i="/v2/channel/{channelId}".replace("{channelId}",encodeURIComponent(String(e))),s={limit:t,forward:r,cursor:n};return this.doFetch(i,"GET",s,null,o)}event(e,t={}){if(null==e)throw new Error("'body' is a required parameter but is null or undefined.");let r=null;return r=JSON.stringify(e||{}),this.doFetch("/v2/event","POST",{},r,t)}deleteFriends(e,t,r={}){const n={ids:e,usernames:t};return this.doFetch("/v2/friend","DELETE",n,null,r)}listFriends(e,t,r,n={}){const o={limit:e,state:t,cursor:r};return this.doFetch("/v2/friend","GET",o,null,n)}addFriends(e,t,r={}){const n={ids:e,usernames:t};return this.doFetch("/v2/friend","POST",n,null,r)}blockFriends(e,t,r={}){const n={ids:e,usernames:t};return this.doFetch("/v2/friend/block","POST",n,null,r)}importFacebookFriends(e,t,r={}){if(null==e)throw new Error("'body' is a required parameter but is null or undefined.");const n={reset:t};let o=null;return o=JSON.stringify(e||{}),this.doFetch("/v2/friend/facebook","POST",n,o,r)}listGroups(e,t,r,n={}){const o={name:e,cursor:t,limit:r};return this.doFetch("/v2/group","GET",o,null,n)}createGroup(e,t={}){if(null==e)throw new Error("'body' is a required parameter but is null or undefined.");let r=null;return r=JSON.stringify(e||{}),this.doFetch("/v2/group","POST",{},r,t)}deleteGroup(e,t={}){if(null==e)throw new Error("'groupId' is a required parameter but is null or undefined.");const r="/v2/group/{groupId}".replace("{groupId}",encodeURIComponent(String(e)));return this.doFetch(r,"DELETE",{},null,t)}updateGroup(e,t,r={}){if(null==e)throw new Error("'groupId' is a required parameter but is null or undefined.");if(null==t)throw new Error("'body' is a required parameter but is null or undefined.");const n="/v2/group/{groupId}".replace("{groupId}",encodeURIComponent(String(e)));let o=null;return o=JSON.stringify(t||{}),this.doFetch(n,"PUT",{},o,r)}addGroupUsers(e,t,r={}){if(null==e)throw new Error("'groupId' is a required parameter but is null or undefined.");const n="/v2/group/{groupId}/add".replace("{groupId}",encodeURIComponent(String(e))),o={user_ids:t};return this.doFetch(n,"POST",o,null,r)}banGroupUsers(e,t,r={}){if(null==e)throw new Error("'groupId' is a required parameter but is null or undefined.");const n="/v2/group/{groupId}/ban".replace("{groupId}",encodeURIComponent(String(e))),o={user_ids:t};return this.doFetch(n,"POST",o,null,r)}demoteGroupUsers(e,t,r={}){if(null==e)throw new Error("'groupId' is a required parameter but is null or undefined.");if(null==t)throw new Error("'userIds' is a required parameter but is null or undefined.");const n="/v2/group/{groupId}/demote".replace("{groupId}",encodeURIComponent(String(e))),o={user_ids:t};return this.doFetch(n,"POST",o,null,r)}joinGroup(e,t={}){if(null==e)throw new Error("'groupId' is a required parameter but is null or undefined.");const r="/v2/group/{groupId}/join".replace("{groupId}",encodeURIComponent(String(e)));return this.doFetch(r,"POST",{},null,t)}kickGroupUsers(e,t,r={}){if(null==e)throw new Error("'groupId' is a required parameter but is null or undefined.");const n="/v2/group/{groupId}/kick".replace("{groupId}",encodeURIComponent(String(e))),o={user_ids:t};return this.doFetch(n,"POST",o,null,r)}leaveGroup(e,t={}){if(null==e)throw new Error("'groupId' is a required parameter but is null or undefined.");const r="/v2/group/{groupId}/leave".replace("{groupId}",encodeURIComponent(String(e)));return this.doFetch(r,"POST",{},null,t)}promoteGroupUsers(e,t,r={}){if(null==e)throw new Error("'groupId' is a required parameter but is null or undefined.");const n="/v2/group/{groupId}/promote".replace("{groupId}",encodeURIComponent(String(e))),o={user_ids:t};return this.doFetch(n,"POST",o,null,r)}listGroupUsers(e,t,r,n,o={}){if(null==e)throw new Error("'groupId' is a required parameter but is null or undefined.");const i="/v2/group/{groupId}/user".replace("{groupId}",encodeURIComponent(String(e))),s={limit:t,state:r,cursor:n};return this.doFetch(i,"GET",s,null,o)}deleteLeaderboardRecord(e,t={}){if(null==e)throw new Error("'leaderboardId' is a required parameter but is null or undefined.");const r="/v2/leaderboard/{leaderboardId}".replace("{leaderboardId}",encodeURIComponent(String(e)));return this.doFetch(r,"DELETE",{},null,t)}listLeaderboardRecords(e,t,r,n,o,i={}){if(null==e)throw new Error("'leaderboardId' is a required parameter but is null or undefined.");const s="/v2/leaderboard/{leaderboardId}".replace("{leaderboardId}",encodeURIComponent(String(e))),a={ownerIds:t,limit:r,cursor:n,expiry:o};return this.doFetch(s,"GET",a,null,i)}writeLeaderboardRecord(e,t,r={}){if(null==e)throw new Error("'leaderboardId' is a required parameter but is null or undefined.");if(null==t)throw new Error("'body' is a required parameter but is null or undefined.");const n="/v2/leaderboard/{leaderboardId}".replace("{leaderboardId}",encodeURIComponent(String(e)));let o=null;return o=JSON.stringify(t||{}),this.doFetch(n,"POST",{},o,r)}listLeaderboardRecordsAroundOwner(e,t,r,n,o={}){if(null==e)throw new Error("'leaderboardId' is a required parameter but is null or undefined.");if(null==t)throw new Error("'ownerId' is a required parameter but is null or undefined.");const i="/v2/leaderboard/{leaderboardId}/owner/{ownerId}".replace("{leaderboardId}",encodeURIComponent(String(e))).replace("{ownerId}",encodeURIComponent(String(t))),s={limit:r,expiry:n};return this.doFetch(i,"GET",s,null,o)}listMatches(e,t,r,n,o,i,s={}){const a={limit:e,authoritative:t,label:r,minSize:n,maxSize:o,query:i};return this.doFetch("/v2/match","GET",a,null,s)}deleteNotifications(e,t={}){const r={ids:e};return this.doFetch("/v2/notification","DELETE",r,null,t)}listNotifications(e,t,r={}){const n={limit:e,cacheableCursor:t};return this.doFetch("/v2/notification","GET",n,null,r)}rpcFunc2(e,t,r,n={}){if(null==e)throw new Error("'id' is a required parameter but is null or undefined.");const o="/v2/rpc/{id}".replace("{id}",encodeURIComponent(String(e))),i={payload:t,httpKey:r};return this.doFetch(o,"GET",i,null,n)}rpcFunc(e,t,r,n={}){if(null==e)throw new Error("'id' is a required parameter but is null or undefined.");if(null==t)throw new Error("'body' is a required parameter but is null or undefined.");const o="/v2/rpc/{id}".replace("{id}",encodeURIComponent(String(e))),i={httpKey:r};let s=null;return s=JSON.stringify(t||{}),this.doFetch(o,"POST",i,s,n)}readStorageObjects(e,t={}){if(null==e)throw new Error("'body' is a required parameter but is null or undefined.");let r=null;return r=JSON.stringify(e||{}),this.doFetch("/v2/storage","POST",{},r,t)}writeStorageObjects(e,t={}){if(null==e)throw new Error("'body' is a required parameter but is null or undefined.");let r=null;return r=JSON.stringify(e||{}),this.doFetch("/v2/storage","PUT",{},r,t)}deleteStorageObjects(e,t={}){if(null==e)throw new Error("'body' is a required parameter but is null or undefined.");let r=null;return r=JSON.stringify(e||{}),this.doFetch("/v2/storage/delete","PUT",{},r,t)}listStorageObjects(e,t,r,n,o={}){if(null==e)throw new Error("'collection' is a required parameter but is null or undefined.");const i="/v2/storage/{collection}".replace("{collection}",encodeURIComponent(String(e))),s={userId:t,limit:r,cursor:n};return this.doFetch(i,"GET",s,null,o)}listStorageObjects2(e,t,r,n,o={}){if(null==e)throw new Error("'collection' is a required parameter but is null or undefined.");if(null==t)throw new Error("'userId' is a required parameter but is null or undefined.");const i="/v2/storage/{collection}/{userId}".replace("{collection}",encodeURIComponent(String(e))).replace("{userId}",encodeURIComponent(String(t))),s={limit:r,cursor:n};return this.doFetch(i,"GET",s,null,o)}listTournaments(e,t,r,n,o,i,s={}){const a={categoryStart:e,categoryEnd:t,startTime:r,endTime:n,limit:o,cursor:i};return this.doFetch("/v2/tournament","GET",a,null,s)}listTournamentRecords(e,t,r,n,o,i={}){if(null==e)throw new Error("'tournamentId' is a required parameter but is null or undefined.");const s="/v2/tournament/{tournamentId}".replace("{tournamentId}",encodeURIComponent(String(e))),a={ownerIds:t,limit:r,cursor:n,expiry:o};return this.doFetch(s,"GET",a,null,i)}writeTournamentRecord(e,t,r={}){if(null==e)throw new Error("'tournamentId' is a required parameter but is null or undefined.");if(null==t)throw new Error("'body' is a required parameter but is null or undefined.");const n="/v2/tournament/{tournamentId}".replace("{tournamentId}",encodeURIComponent(String(e)));let o=null;return o=JSON.stringify(t||{}),this.doFetch(n,"PUT",{},o,r)}joinTournament(e,t={}){if(null==e)throw new Error("'tournamentId' is a required parameter but is null or undefined.");const r="/v2/tournament/{tournamentId}/join".replace("{tournamentId}",encodeURIComponent(String(e)));return this.doFetch(r,"POST",{},null,t)}listTournamentRecordsAroundOwner(e,t,r,n,o={}){if(null==e)throw new Error("'tournamentId' is a required parameter but is null or undefined.");if(null==t)throw new Error("'ownerId' is a required parameter but is null or undefined.");const i="/v2/tournament/{tournamentId}/owner/{ownerId}".replace("{tournamentId}",encodeURIComponent(String(e))).replace("{ownerId}",encodeURIComponent(String(t))),s={limit:r,expiry:n};return this.doFetch(i,"GET",s,null,o)}getUsers(e,t,r,n={}){const o={ids:e,usernames:t,facebookIds:r};return this.doFetch("/v2/user","GET",o,null,n)}listUserGroups(e,t,r,n,o={}){if(null==e)throw new Error("'userId' is a required parameter but is null or undefined.");const i="/v2/user/{userId}/group".replace("{userId}",encodeURIComponent(String(e))),s={limit:t,state:r,cursor:n};return this.doFetch(i,"GET",s,null,o)}}(this.configuration)}addGroupUsers(e,t,r){return this.configuration.bearerToken=e&&e.token,this.apiClient.addGroupUsers(t,r).then((e=>void 0!==e))}addFriends(e,t,r){return this.configuration.bearerToken=e&&e.token,this.apiClient.addFriends(t,r).then((e=>void 0!==e))}authenticateApple(e,t,r,n=new Map,o={}){const i={token:e,vars:n};return this.apiClient.authenticateApple(i,t,r,o).then((e=>Ne.restore(e.token||"")))}authenticateCustom(e,t,r,n=new Map,o={}){const i={id:e,vars:n};return this.apiClient.authenticateCustom(i,t,r,o).then((e=>Ne.restore(e.token||"")))}authenticateDevice(e,t,r,n){const o={id:e,vars:n};return this.apiClient.authenticateDevice(o,t,r).then((e=>Ne.restore(e.token||"")))}authenticateEmail(e,t,r,n,o){const i={email:e,password:t,vars:o};return this.apiClient.authenticateEmail(i,r,n).then((e=>Ne.restore(e.token||"")))}authenticateFacebookInstantGame(e,t,r,n,o={}){const i={signed_player_info:e,vars:n};return this.apiClient.authenticateFacebookInstantGame({signed_player_info:i.signed_player_info,vars:i.vars},t,r,o).then((e=>Ne.restore(e.token||"")))}authenticateFacebook(e,t,r,n,o,i={}){const s={token:e,vars:o};return this.apiClient.authenticateFacebook(s,t,r,n,i).then((e=>Ne.restore(e.token||"")))}authenticateGoogle(e,t,r,n,o={}){const i={token:e,vars:n};return this.apiClient.authenticateGoogle(i,t,r,o).then((e=>Ne.restore(e.token||"")))}authenticateGameCenter(e,t,r,n){const o={token:e,vars:n};return this.apiClient.authenticateGameCenter(o,t,r).then((e=>Ne.restore(e.token||"")))}authenticateSteam(e,t,r,n){const o={token:e,vars:n};return this.apiClient.authenticateSteam(o,t,r).then((e=>Ne.restore(e.token||"")))}banGroupUsers(e,t,r){return this.configuration.bearerToken=e&&e.token,this.apiClient.banGroupUsers(t,r).then((e=>void 0!==e))}blockFriends(e,t,r){return this.configuration.bearerToken=e&&e.token,this.apiClient.blockFriends(t,r).then((e=>Promise.resolve(null!=e)))}createGroup(e,t){return this.configuration.bearerToken=e&&e.token,this.apiClient.createGroup(t).then((e=>Promise.resolve({avatar_url:e.avatar_url,create_time:e.create_time,creator_id:e.creator_id,description:e.description,edge_count:e.edge_count?Number(e.edge_count):0,id:e.id,lang_tag:e.lang_tag,max_count:e.max_count?Number(e.max_count):0,metadata:e.metadata?JSON.parse(e.metadata):void 0,name:e.name,open:e.open,update_time:e.update_time})))}createSocket(e=!1,t=!1,r=new Ie){return new class{constructor(e,t,r=!1,n=!1,o=new Ie){this.host=e,this.port=t,this.useSSL=r,this.verbose=n,this.adapter=o,this.cIds={},this.nextCid=1}generatecid(){const e=this.nextCid.toString();return++this.nextCid,e}connect(e,t=!1){if(this.adapter.isConnected)return Promise.resolve(e);const r=this.useSSL?"wss://":"ws://";return this.adapter.connect(r,this.host,this.port,t,e.token),this.adapter.onClose=e=>{this.ondisconnect(e)},this.adapter.onError=e=>{this.onerror(e)},this.adapter.onMessage=e=>{if(this.verbose&&window&&window.console&&console.log("Response: %o",e),null==e.cid)e.notifications?e.notifications.notifications.forEach((e=>{e.content=e.content?JSON.parse(e.content):void 0,this.onnotification(e)})):e.match_data?(e.match_data.data=null!=e.match_data.data?JSON.parse((t=e.match_data.data,decodeURIComponent(Ce(t).split("").map((function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)})).join("")))):null,e.match_data.op_code=parseInt(e.match_data.op_code),this.onmatchdata(e.match_data)):e.match_presence_event?this.onmatchpresence(e.match_presence_event):e.matchmaker_matched?this.onmatchmakermatched(e.matchmaker_matched):e.status_presence_event?this.onstatuspresence(e.status_presence_event):e.stream_presence_event?this.onstreampresence(e.stream_presence_event):e.stream_data?this.onstreamdata(e.stream_data):e.channel_message?(e.channel_message.content=JSON.parse(e.channel_message.content),this.onchannelmessage(e.channel_message)):e.channel_presence_event?this.onchannelpresence(e.channel_presence_event):this.verbose&&window&&window.console&&console.log("Unrecognized message received: %o",e);else{const t=this.cIds[e.cid];if(!t)return void(this.verbose&&window&&window.console&&console.error("No promise executor for message: %o",e));delete this.cIds[e.cid],e.error?t.reject(e.error):t.resolve(e)}var t},new Promise(((t,r)=>{this.adapter.onOpen=r=>{this.verbose&&window&&window.console&&console.log(r),t(e)},this.adapter.onError=e=>{r(e),this.adapter.close()}}))}disconnect(e=!0){this.adapter.isConnected&&this.adapter.close(),e&&this.ondisconnect({})}ondisconnect(e){this.verbose&&window&&window.console&&console.log(e)}onerror(e){this.verbose&&window&&window.console&&console.log(e)}onchannelmessage(e){this.verbose&&window&&window.console&&console.log(e)}onchannelpresence(e){this.verbose&&window&&window.console&&console.log(e)}onnotification(e){this.verbose&&window&&window.console&&console.log(e)}onmatchdata(e){this.verbose&&window&&window.console&&console.log(e)}onmatchpresence(e){this.verbose&&window&&window.console&&console.log(e)}onmatchmakermatched(e){this.verbose&&window&&window.console&&console.log(e)}onstatuspresence(e){this.verbose&&window&&window.console&&console.log(e)}onstreampresence(e){this.verbose&&window&&window.console&&console.log(e)}onstreamdata(e){this.verbose&&window&&window.console&&console.log(e)}send(e){const t=e;return new Promise(((e,r)=>{if(this.adapter.isConnected)if(t.match_data_send)t.match_data_send.data=(n=JSON.stringify(t.match_data_send.data),ke(encodeURIComponent(n).replace(/%([0-9A-F]{2})/g,(function(e,t){return String.fromCharCode(Number("0x"+t))})))),this.adapter.send(t),e();else{t.channel_message_send?t.channel_message_send.content=JSON.stringify(t.channel_message_send.content):t.channel_message_update&&(t.channel_message_update.content=JSON.stringify(t.channel_message_update.content));const n=this.generatecid();this.cIds[n]={resolve:e,reject:r},t.cid=n,this.adapter.send(t)}else r("Socket connection has not been established yet.");var n;this.verbose&&window&&window.console&&console.log("Sent message: %o",t)}))}addMatchmaker(e,t,r,n,o){return ie(this,null,(function*(){const i={matchmaker_add:{min_count:t,max_count:r,query:e,string_properties:n,numeric_properties:o}};return(yield this.send(i)).matchmaker_ticket}))}createMatch(){return ie(this,null,(function*(){return(yield this.send({match_create:{}})).match}))}followUsers(e){return ie(this,null,(function*(){return(yield this.send({status_follow:{user_ids:e}})).status}))}joinChat(e,t,r,n){return ie(this,null,(function*(){return(yield this.send({channel_join:{target:e,type:t,persistence:r,hidden:n}})).channel}))}joinMatch(e,t,r){return ie(this,null,(function*(){const n={match_join:{metadata:r}};return t?n.match_join.token=t:n.match_join.match_id=e,(yield this.send(n)).match}))}leaveChat(e){return this.send({channel_leave:{channel_id:e}})}leaveMatch(e){return this.send({match_leave:{match_id:e}})}removeChatMessage(e,t){return ie(this,null,(function*(){return(yield this.send({channel_message_remove:{channel_id:e,message_id:t}})).channel_message_ack}))}removeMatchmaker(e){return this.send({matchmaker_remove:{ticket:e}})}rpc(e,t,r){return ie(this,null,(function*(){return(yield this.send({rpc:{id:e,payload:t,http_key:r}})).rpc}))}sendMatchState(e,t,r,n){return ie(this,null,(function*(){return this.send({match_data_send:{match_id:e,op_code:t,data:r,presences:null!=n?n:[]}})}))}unfollowUsers(e){return this.send({status_unfollow:{user_ids:e}})}updateChatMessage(e,t,r){return ie(this,null,(function*(){return(yield this.send({channel_message_update:{channel_id:e,message_id:t,content:r}})).channel_message_ack}))}updateStatus(e){return this.send({status_update:{status:e}})}writeChatMessage(e,t){return ie(this,null,(function*(){return(yield this.send({channel_message_send:{channel_id:e,content:t}})).channel_message_ack}))}}(this.host,this.port,e,t,r)}deleteFriends(e,t,r){return this.configuration.bearerToken=e&&e.token,this.apiClient.deleteFriends(t,r).then((e=>void 0!==e))}deleteGroup(e,t){return this.configuration.bearerToken=e&&e.token,this.apiClient.deleteGroup(t).then((e=>void 0!==e))}deleteNotifications(e,t){return this.configuration.bearerToken=e&&e.token,this.apiClient.deleteNotifications(t).then((e=>Promise.resolve(null!=e)))}deleteStorageObjects(e,t){return this.configuration.bearerToken=e&&e.token,this.apiClient.deleteStorageObjects(t).then((e=>Promise.resolve(null!=e)))}demoteGroupUsers(e,t,r){return this.configuration.bearerToken=e&&e.token,this.apiClient.demoteGroupUsers(t,r)}emitEvent(e,t){return this.configuration.bearerToken=e&&e.token,this.apiClient.event(t).then((e=>Promise.resolve(null!=e)))}getAccount(e){return this.configuration.bearerToken=e&&e.token,this.apiClient.getAccount()}importFacebookFriends(e,t){return this.configuration.bearerToken=e&&e.token,this.apiClient.importFacebookFriends(t).then((e=>void 0!==e))}getUsers(e,t,r,n){return this.configuration.bearerToken=e&&e.token,this.apiClient.getUsers(t,r,n).then((e=>{var t={users:[]};return null==e.users||e.users.forEach((e=>{t.users.push({avatar_url:e.avatar_url,create_time:e.create_time,display_name:e.display_name,edge_count:e.edge_count?Number(e.edge_count):0,facebook_id:e.facebook_id,gamecenter_id:e.gamecenter_id,google_id:e.google_id,id:e.id,lang_tag:e.lang_tag,location:e.location,online:e.online,steam_id:e.steam_id,timezone:e.timezone,update_time:e.update_time,username:e.username,metadata:e.metadata?JSON.parse(e.metadata):void 0})})),Promise.resolve(t)}))}joinGroup(e,t){return this.configuration.bearerToken=e&&e.token,this.apiClient.joinGroup(t,{}).then((e=>void 0!==e))}joinTournament(e,t){return this.configuration.bearerToken=e&&e.token,this.apiClient.joinTournament(t,{}).then((e=>void 0!==e))}kickGroupUsers(e,t,r){return this.configuration.bearerToken=e&&e.token,this.apiClient.kickGroupUsers(t,r).then((e=>Promise.resolve(null!=e)))}leaveGroup(e,t){return this.configuration.bearerToken=e&&e.token,this.apiClient.leaveGroup(t,{}).then((e=>void 0!==e))}listChannelMessages(e,t,r,n,o){return this.configuration.bearerToken=e&&e.token,this.apiClient.listChannelMessages(t,r,n,o).then((e=>{var t={messages:[],next_cursor:e.next_cursor,prev_cursor:e.prev_cursor};return null==e.messages||e.messages.forEach((e=>{t.messages.push({channel_id:e.channel_id,code:e.code?Number(e.code):0,create_time:e.create_time,message_id:e.message_id,persistent:e.persistent,sender_id:e.sender_id,update_time:e.update_time,username:e.username,content:e.content?JSON.parse(e.content):void 0,group_id:e.group_id,room_name:e.room_name,user_id_one:e.user_id_one,user_id_two:e.user_id_two})})),Promise.resolve(t)}))}listGroupUsers(e,t,r,n,o){return this.configuration.bearerToken=e&&e.token,this.apiClient.listGroupUsers(t,n,r,o).then((e=>{var t={group_users:[],cursor:e.cursor};return null==e.group_users||e.group_users.forEach((e=>{t.group_users.push({user:{avatar_url:e.user.avatar_url,create_time:e.user.create_time,display_name:e.user.display_name,edge_count:e.user.edge_count?Number(e.user.edge_count):0,facebook_id:e.user.facebook_id,gamecenter_id:e.user.gamecenter_id,google_id:e.user.google_id,id:e.user.id,lang_tag:e.user.lang_tag,location:e.user.location,online:e.user.online,steam_id:e.user.steam_id,timezone:e.user.timezone,update_time:e.user.update_time,username:e.user.username,metadata:e.user.metadata?JSON.parse(e.user.metadata):void 0},state:e.state?Number(e.state):0})})),Promise.resolve(t)}))}listUserGroups(e,t,r,n,o){return this.configuration.bearerToken=e&&e.token,this.apiClient.listUserGroups(t,r,n,o).then((e=>{var t={user_groups:[],cursor:e.cursor};return null==e.user_groups||e.user_groups.forEach((e=>{t.user_groups.push({group:{avatar_url:e.group.avatar_url,create_time:e.group.create_time,creator_id:e.group.creator_id,description:e.group.description,edge_count:e.group.edge_count?Number(e.group.edge_count):0,id:e.group.id,lang_tag:e.group.lang_tag,max_count:e.group.max_count,metadata:e.group.metadata?JSON.parse(e.group.metadata):void 0,name:e.group.name,open:e.group.open,update_time:e.group.update_time},state:e.state?Number(e.state):0})})),Promise.resolve(t)}))}listGroups(e,t,r,n){return this.configuration.bearerToken=e&&e.token,this.apiClient.listGroups(t,r,n).then((e=>{var t={groups:[]};return null==e.groups||(t.cursor=e.cursor,e.groups.forEach((e=>{t.groups.push({avatar_url:e.avatar_url,create_time:e.create_time,creator_id:e.creator_id,description:e.description,edge_count:e.edge_count?Number(e.edge_count):0,id:e.id,lang_tag:e.lang_tag,max_count:e.max_count,metadata:e.metadata?JSON.parse(e.metadata):void 0,name:e.name,open:e.open,update_time:e.update_time})}))),Promise.resolve(t)}))}linkApple(e,t){return this.configuration.bearerToken=e&&e.token,this.apiClient.linkApple(t).then((e=>void 0!==e))}linkCustom(e,t){return this.configuration.bearerToken=e&&e.token,this.apiClient.linkCustom(t).then((e=>void 0!==e))}linkDevice(e,t){return this.configuration.bearerToken=e&&e.token,this.apiClient.linkDevice(t).then((e=>void 0!==e))}linkEmail(e,t){return this.configuration.bearerToken=e&&e.token,this.apiClient.linkEmail(t).then((e=>void 0!==e))}linkFacebook(e,t){return this.configuration.bearerToken=e&&e.token,this.apiClient.linkFacebook(t).then((e=>void 0!==e))}linkFacebookInstantGame(e,t){return this.configuration.bearerToken=e&&e.token,this.apiClient.linkFacebookInstantGame(t).then((e=>void 0!==e))}linkGoogle(e,t){return this.configuration.bearerToken=e&&e.token,this.apiClient.linkGoogle(t).then((e=>void 0!==e))}linkGameCenter(e,t){return this.configuration.bearerToken=e&&e.token,this.apiClient.linkGameCenter(t).then((e=>void 0!==e))}linkSteam(e,t){return this.configuration.bearerToken=e&&e.token,this.apiClient.linkSteam(t).then((e=>void 0!==e))}listFriends(e,t,r,n){return this.configuration.bearerToken=e&&e.token,this.apiClient.listFriends(r,t,n).then((e=>{var t={friends:[],cursor:e.cursor};return null==e.friends||e.friends.forEach((e=>{t.friends.push({user:{avatar_url:e.user.avatar_url,create_time:e.user.create_time,display_name:e.user.display_name,edge_count:e.user.edge_count?Number(e.user.edge_count):0,facebook_id:e.user.facebook_id,gamecenter_id:e.user.gamecenter_id,google_id:e.user.google_id,id:e.user.id,lang_tag:e.user.lang_tag,location:e.user.location,online:e.user.online,steam_id:e.user.steam_id,timezone:e.user.timezone,update_time:e.user.update_time,username:e.user.username,metadata:e.user.metadata?JSON.parse(e.user.metadata):void 0,facebook_instant_game_id:e.user.facebook_instant_game_id},state:e.state})})),Promise.resolve(t)}))}listLeaderboardRecords(e,t,r,n,o,i){return this.configuration.bearerToken=e&&e.token,this.apiClient.listLeaderboardRecords(t,r,n,o,i).then((e=>{var t={next_cursor:e.next_cursor,prev_cursor:e.prev_cursor,owner_records:[],records:[]};return null!=e.owner_records&&e.owner_records.forEach((e=>{t.owner_records.push({expiry_time:e.expiry_time,leaderboard_id:e.leaderboard_id,metadata:e.metadata?JSON.parse(e.metadata):void 0,num_score:e.num_score?Number(e.num_score):0,owner_id:e.owner_id,rank:e.rank?Number(e.rank):0,score:e.score?Number(e.score):0,subscore:e.subscore?Number(e.subscore):0,update_time:e.update_time,username:e.username,max_num_score:e.max_num_score?Number(e.max_num_score):0})})),null!=e.records&&e.records.forEach((e=>{t.records.push({expiry_time:e.expiry_time,leaderboard_id:e.leaderboard_id,metadata:e.metadata?JSON.parse(e.metadata):void 0,num_score:e.num_score?Number(e.num_score):0,owner_id:e.owner_id,rank:e.rank?Number(e.rank):0,score:e.score?Number(e.score):0,subscore:e.subscore?Number(e.subscore):0,update_time:e.update_time,username:e.username,max_num_score:e.max_num_score?Number(e.max_num_score):0})})),Promise.resolve(t)}))}listLeaderboardRecordsAroundOwner(e,t,r,n,o){return this.configuration.bearerToken=e&&e.token,this.apiClient.listLeaderboardRecordsAroundOwner(t,r,n,o).then((e=>{var t={next_cursor:e.next_cursor,prev_cursor:e.prev_cursor,owner_records:[],records:[]};return null!=e.owner_records&&e.owner_records.forEach((e=>{t.owner_records.push({expiry_time:e.expiry_time,leaderboard_id:e.leaderboard_id,metadata:e.metadata?JSON.parse(e.metadata):void 0,num_score:e.num_score?Number(e.num_score):0,owner_id:e.owner_id,rank:e.rank?Number(e.rank):0,score:e.score?Number(e.score):0,subscore:e.subscore?Number(e.subscore):0,update_time:e.update_time,username:e.username,max_num_score:e.max_num_score?Number(e.max_num_score):0})})),null!=e.records&&e.records.forEach((e=>{t.records.push({expiry_time:e.expiry_time,leaderboard_id:e.leaderboard_id,metadata:e.metadata?JSON.parse(e.metadata):void 0,num_score:e.num_score?Number(e.num_score):0,owner_id:e.owner_id,rank:e.rank?Number(e.rank):0,score:e.score?Number(e.score):0,subscore:e.subscore?Number(e.subscore):0,update_time:e.update_time,username:e.username,max_num_score:e.max_num_score?Number(e.max_num_score):0})})),Promise.resolve(t)}))}listMatches(e,t,r,n,o,i,s){return this.configuration.bearerToken=e&&e.token,this.apiClient.listMatches(t,r,n,o,i,s)}listNotifications(e,t,r){return this.configuration.bearerToken=e&&e.token,this.apiClient.listNotifications(t,r).then((e=>{var t={cacheable_cursor:e.cacheable_cursor,notifications:[]};return null==e.notifications||e.notifications.forEach((e=>{t.notifications.push({code:e.code?Number(e.code):0,create_time:e.create_time,id:e.id,persistent:e.persistent,sender_id:e.sender_id,subject:e.subject,content:e.content?JSON.parse(e.content):void 0})})),Promise.resolve(t)}))}listStorageObjects(e,t,r,n,o){return this.configuration.bearerToken=e&&e.token,this.apiClient.listStorageObjects(t,r,n,o).then((e=>{var t={objects:[],cursor:e.cursor};return null==e.objects||e.objects.forEach((e=>{t.objects.push({collection:e.collection,key:e.key,permission_read:e.permission_read?Number(e.permission_read):0,permission_write:e.permission_write?Number(e.permission_write):0,value:e.value?JSON.parse(e.value):void 0,version:e.version,user_id:e.user_id,create_time:e.create_time,update_time:e.update_time})})),Promise.resolve(t)}))}listTournaments(e,t,r,n,o,i,s){return this.configuration.bearerToken=e&&e.token,this.apiClient.listTournaments(t,r,n,o,i,s).then((e=>{var t={cursor:e.cursor,tournaments:[]};return null!=e.tournaments&&e.tournaments.forEach((e=>{t.tournaments.push({id:e.id,title:e.title,description:e.description,duration:e.duration?Number(e.duration):0,category:e.category?Number(e.category):0,sort_order:e.sort_order?Number(e.sort_order):0,size:e.size?Number(e.size):0,max_size:e.max_size?Number(e.max_size):0,max_num_score:e.max_num_score?Number(e.max_num_score):0,can_enter:e.can_enter,end_active:e.end_active?Number(e.end_active):0,next_reset:e.next_reset?Number(e.next_reset):0,metadata:e.metadata?JSON.parse(e.metadata):void 0,create_time:e.create_time,start_time:e.start_time,end_time:e.end_time,start_active:e.start_active})})),Promise.resolve(t)}))}listTournamentRecords(e,t,r,n,o,i){return this.configuration.bearerToken=e&&e.token,this.apiClient.listTournamentRecords(t,r,n,o,i).then((e=>{var t={next_cursor:e.next_cursor,prev_cursor:e.prev_cursor,owner_records:[],records:[]};return null!=e.owner_records&&e.owner_records.forEach((e=>{t.owner_records.push({expiry_time:e.expiry_time,leaderboard_id:e.leaderboard_id,metadata:e.metadata?JSON.parse(e.metadata):void 0,num_score:e.num_score?Number(e.num_score):0,owner_id:e.owner_id,rank:e.rank?Number(e.rank):0,score:e.score?Number(e.score):0,subscore:e.subscore?Number(e.subscore):0,update_time:e.update_time,username:e.username,max_num_score:e.max_num_score?Number(e.max_num_score):0})})),null!=e.records&&e.records.forEach((e=>{t.records.push({expiry_time:e.expiry_time,leaderboard_id:e.leaderboard_id,metadata:e.metadata?JSON.parse(e.metadata):void 0,num_score:e.num_score?Number(e.num_score):0,owner_id:e.owner_id,rank:e.rank?Number(e.rank):0,score:e.score?Number(e.score):0,subscore:e.subscore?Number(e.subscore):0,update_time:e.update_time,username:e.username,max_num_score:e.max_num_score?Number(e.max_num_score):0})})),Promise.resolve(t)}))}listTournamentRecordsAroundOwner(e,t,r,n,o){return this.configuration.bearerToken=e&&e.token,this.apiClient.listTournamentRecordsAroundOwner(t,r,n,o).then((e=>{var t={next_cursor:e.next_cursor,prev_cursor:e.prev_cursor,owner_records:[],records:[]};return null!=e.owner_records&&e.owner_records.forEach((e=>{t.owner_records.push({expiry_time:e.expiry_time,leaderboard_id:e.leaderboard_id,metadata:e.metadata?JSON.parse(e.metadata):void 0,num_score:e.num_score?Number(e.num_score):0,owner_id:e.owner_id,rank:e.rank?Number(e.rank):0,score:e.score?Number(e.score):0,subscore:e.subscore?Number(e.subscore):0,update_time:e.update_time,username:e.username,max_num_score:e.max_num_score?Number(e.max_num_score):0})})),null!=e.records&&e.records.forEach((e=>{t.records.push({expiry_time:e.expiry_time,leaderboard_id:e.leaderboard_id,metadata:e.metadata?JSON.parse(e.metadata):void 0,num_score:e.num_score?Number(e.num_score):0,owner_id:e.owner_id,rank:e.rank?Number(e.rank):0,score:e.score?Number(e.score):0,subscore:e.subscore?Number(e.subscore):0,update_time:e.update_time,username:e.username,max_num_score:e.max_num_score?Number(e.max_num_score):0})})),Promise.resolve(t)}))}promoteGroupUsers(e,t,r){return this.configuration.bearerToken=e&&e.token,this.apiClient.promoteGroupUsers(t,r)}readStorageObjects(e,t){return this.configuration.bearerToken=e&&e.token,this.apiClient.readStorageObjects(t).then((e=>{var t={objects:[]};return null==e.objects||e.objects.forEach((e=>{t.objects.push({collection:e.collection,key:e.key,permission_read:e.permission_read?Number(e.permission_read):0,permission_write:e.permission_write?Number(e.permission_write):0,value:e.value?JSON.parse(e.value):void 0,version:e.version,user_id:e.user_id,create_time:e.create_time,update_time:e.update_time})})),Promise.resolve(t)}))}rpc(e,t,r){return this.configuration.bearerToken=e&&e.token,this.apiClient.rpcFunc(t,JSON.stringify(r)).then((e=>Promise.resolve({id:e.id,payload:e.payload?JSON.parse(e.payload):void 0})))}rpcGet(e,t,r,n){return r&&""!=r?(this.configuration.username=void 0,this.configuration.bearerToken=void 0):this.configuration.bearerToken=t&&t.token,this.apiClient.rpcFunc2(e,n&&JSON.stringify(n)||"",r).then((e=>(this.configuration.username=this.serverkey,Promise.resolve({id:e.id,payload:e.payload?JSON.parse(e.payload):void 0})))).catch((e=>{throw this.configuration.username=this.serverkey,e}))}unlinkApple(e,t){return this.configuration.bearerToken=e&&e.token,this.apiClient.unlinkApple(t).then((e=>void 0!==e))}unlinkCustom(e,t){return this.configuration.bearerToken=e&&e.token,this.apiClient.unlinkCustom(t).then((e=>void 0!==e))}unlinkDevice(e,t){return this.configuration.bearerToken=e&&e.token,this.apiClient.unlinkDevice(t).then((e=>void 0!==e))}unlinkEmail(e,t){return this.configuration.bearerToken=e&&e.token,this.apiClient.unlinkEmail(t).then((e=>void 0!==e))}unlinkFacebook(e,t){return this.configuration.bearerToken=e&&e.token,this.apiClient.unlinkFacebook(t).then((e=>void 0!==e))}unlinkFacebookInstantGame(e,t){return this.configuration.bearerToken=e&&e.token,this.apiClient.unlinkFacebookInstantGame(t).then((e=>void 0!==e))}unlinkGoogle(e,t){return this.configuration.bearerToken=e&&e.token,this.apiClient.unlinkGoogle(t).then((e=>void 0!==e))}unlinkGameCenter(e,t){return this.configuration.bearerToken=e&&e.token,this.apiClient.unlinkGameCenter(t).then((e=>void 0!==e))}unlinkSteam(e,t){return this.configuration.bearerToken=e&&e.token,this.apiClient.unlinkSteam(t).then((e=>void 0!==e))}updateAccount(e,t){return this.configuration.bearerToken=e&&e.token,this.apiClient.updateAccount(t).then((e=>void 0!==e))}updateGroup(e,t,r){return this.configuration.bearerToken=e&&e.token,this.apiClient.updateGroup(t,r).then((e=>void 0!==e))}writeLeaderboardRecord(e,t,r){return this.configuration.bearerToken=e&&e.token,this.apiClient.writeLeaderboardRecord(t,{metadata:r.metadata?JSON.stringify(r.metadata):void 0,score:r.score,subscore:r.subscore}).then((e=>Promise.resolve({expiry_time:e.expiry_time,leaderboard_id:e.leaderboard_id,metadata:e.metadata?JSON.parse(e.metadata):void 0,num_score:e.num_score?Number(e.num_score):0,owner_id:e.owner_id,score:e.score?Number(e.score):0,subscore:e.subscore?Number(e.subscore):0,update_time:e.update_time,username:e.username,max_num_score:e.max_num_score?Number(e.max_num_score):0,rank:e.rank?Number(e.rank):0})))}writeStorageObjects(e,t){this.configuration.bearerToken=e&&e.token;var r={objects:[]};return t.forEach((e=>{r.objects.push({collection:e.collection,key:e.key,permission_read:e.permission_read,permission_write:e.permission_write,value:JSON.stringify(e.value),version:e.version})})),this.apiClient.writeStorageObjects(r)}writeTournamentRecord(e,t,r){return this.configuration.bearerToken=e&&e.token,this.apiClient.writeTournamentRecord(t,{metadata:r.metadata?JSON.stringify(r.metadata):void 0,score:r.score,subscore:r.subscore}).then((e=>Promise.resolve({expiry_time:e.expiry_time,leaderboard_id:e.leaderboard_id,metadata:e.metadata?JSON.parse(e.metadata):void 0,num_score:e.num_score?Number(e.num_score):0,owner_id:e.owner_id,score:e.score?Number(e.score):0,subscore:e.subscore?Number(e.subscore):0,update_time:e.update_time,username:e.username,max_num_score:e.max_num_score?Number(e.max_num_score):0,rank:e.rank?Number(e.rank):0})))}},Ae=function(e,t){return function(){for(var r=new Array(arguments.length),n=0;n<r.length;n++)r[n]=arguments[n];return e.apply(t,r)}},Fe=Object.prototype.toString;function Re(e){return"[object Array]"===Fe.call(e)}function Ue(e){return void 0===e}function je(e){return null!==e&&"object"==typeof e}function Ge(e){if("[object Object]"!==Fe.call(e))return!1;var t=Object.getPrototypeOf(e);return null===t||t===Object.prototype}function qe(e){return"[object Function]"===Fe.call(e)}function Le(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),Re(e))for(var r=0,n=e.length;r<n;r++)t.call(null,e[r],r,e);else for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.call(null,e[o],o,e)}var De={isArray:Re,isArrayBuffer:function(e){return"[object ArrayBuffer]"===Fe.call(e)},isBuffer:function(e){return null!==e&&!Ue(e)&&null!==e.constructor&&!Ue(e.constructor)&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)},isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:je,isPlainObject:Ge,isUndefined:Ue,isDate:function(e){return"[object Date]"===Fe.call(e)},isFile:function(e){return"[object File]"===Fe.call(e)},isBlob:function(e){return"[object Blob]"===Fe.call(e)},isFunction:qe,isStream:function(e){return je(e)&&qe(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)},forEach:Le,merge:function e(){var t={};function r(r,n){Ge(t[n])&&Ge(r)?t[n]=e(t[n],r):Ge(r)?t[n]=e({},r):Re(r)?t[n]=r.slice():t[n]=r}for(var n=0,o=arguments.length;n<o;n++)Le(arguments[n],r);return t},extend:function(e,t,r){return Le(t,(function(t,n){e[n]=r&&"function"==typeof t?Ae(t,r):t})),e},trim:function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e}};function Je(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var $e=function(e,t,r){if(!t)return e;var n;if(r)n=r(t);else if(De.isURLSearchParams(t))n=t.toString();else{var o=[];De.forEach(t,(function(e,t){null!=e&&(De.isArray(e)?t+="[]":e=[e],De.forEach(e,(function(e){De.isDate(e)?e=e.toISOString():De.isObject(e)&&(e=JSON.stringify(e)),o.push(Je(t)+"="+Je(e))})))})),n=o.join("&")}if(n){var i=e.indexOf("#");-1!==i&&(e=e.slice(0,i)),e+=(-1===e.indexOf("?")?"?":"&")+n}return e};function Me(){this.handlers=[]}Me.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},Me.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},Me.prototype.forEach=function(e){De.forEach(this.handlers,(function(t){null!==t&&e(t)}))};var Be=Me,ze=function(e,t,r){return De.forEach(r,(function(r){e=r(e,t)})),e},He=function(e){return!(!e||!e.__CANCEL__)},Ye=function(e,t){De.forEach(e,(function(r,n){n!==t&&n.toUpperCase()===t.toUpperCase()&&(e[t]=r,delete e[n])}))},Xe=function(e,t,r,n,o){return function(e,t,r,n,o){return e.config=t,r&&(e.code=r),e.request=n,e.response=o,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e}(new Error(e),t,r,n,o)},Ke=De.isStandardBrowserEnv()?{write:function(e,t,r,n,o,i){var s=[];s.push(e+"="+encodeURIComponent(t)),De.isNumber(r)&&s.push("expires="+new Date(r).toGMTString()),De.isString(n)&&s.push("path="+n),De.isString(o)&&s.push("domain="+o),!0===i&&s.push("secure"),document.cookie=s.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}},Ve=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],Ze=De.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a");function n(e){var n=e;return t&&(r.setAttribute("href",n),n=r.href),r.setAttribute("href",n),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:"/"===r.pathname.charAt(0)?r.pathname:"/"+r.pathname}}return e=n(window.location.href),function(t){var r=De.isString(t)?n(t):t;return r.protocol===e.protocol&&r.host===e.host}}():function(){return!0},We=function(e){return new Promise((function(t,r){var n=e.data,o=e.headers;De.isFormData(n)&&delete o["Content-Type"];var i=new XMLHttpRequest;if(e.auth){var s=e.auth.username||"",a=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";o.Authorization="Basic "+btoa(s+":"+a)}var u,c,l=(u=e.baseURL,c=e.url,u&&!function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}(c)?function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}(u,c):c);if(i.open(e.method.toUpperCase(),$e(l,e.params,e.paramsSerializer),!0),i.timeout=e.timeout,i.onreadystatechange=function(){if(i&&4===i.readyState&&(0!==i.status||i.responseURL&&0===i.responseURL.indexOf("file:"))){var n,o,s,a,u,c="getAllResponseHeaders"in i?(n=i.getAllResponseHeaders(),u={},n?(De.forEach(n.split("\n"),(function(e){if(a=e.indexOf(":"),o=De.trim(e.substr(0,a)).toLowerCase(),s=De.trim(e.substr(a+1)),o){if(u[o]&&Ve.indexOf(o)>=0)return;u[o]="set-cookie"===o?(u[o]?u[o]:[]).concat([s]):u[o]?u[o]+", "+s:s}})),u):u):null,l={data:e.responseType&&"text"!==e.responseType?i.response:i.responseText,status:i.status,statusText:i.statusText,headers:c,config:e,request:i};!function(e,t,r){var n=r.config.validateStatus;r.status&&n&&!n(r.status)?t(Xe("Request failed with status code "+r.status,r.config,null,r.request,r)):e(r)}(t,r,l),i=null}},i.onabort=function(){i&&(r(Xe("Request aborted",e,"ECONNABORTED",i)),i=null)},i.onerror=function(){r(Xe("Network Error",e,null,i)),i=null},i.ontimeout=function(){var t="timeout of "+e.timeout+"ms exceeded";e.timeoutErrorMessage&&(t=e.timeoutErrorMessage),r(Xe(t,e,"ECONNABORTED",i)),i=null},De.isStandardBrowserEnv()){var d=(e.withCredentials||Ze(l))&&e.xsrfCookieName?Ke.read(e.xsrfCookieName):void 0;d&&(o[e.xsrfHeaderName]=d)}if("setRequestHeader"in i&&De.forEach(o,(function(e,t){void 0===n&&"content-type"===t.toLowerCase()?delete o[t]:i.setRequestHeader(t,e)})),De.isUndefined(e.withCredentials)||(i.withCredentials=!!e.withCredentials),e.responseType)try{i.responseType=e.responseType}catch(t){if("json"!==e.responseType)throw t}"function"==typeof e.onDownloadProgress&&i.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&i.upload&&i.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then((function(e){i&&(i.abort(),r(e),i=null)})),n||(n=null),i.send(n)}))},Qe={"Content-Type":"application/x-www-form-urlencoded"};function et(e,t){!De.isUndefined(e)&&De.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var tt,rt={adapter:(("undefined"!=typeof XMLHttpRequest||"undefined"!=typeof process&&"[object process]"===Object.prototype.toString.call(process))&&(tt=We),tt),transformRequest:[function(e,t){return Ye(t,"Accept"),Ye(t,"Content-Type"),De.isFormData(e)||De.isArrayBuffer(e)||De.isBuffer(e)||De.isStream(e)||De.isFile(e)||De.isBlob(e)?e:De.isArrayBufferView(e)?e.buffer:De.isURLSearchParams(e)?(et(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):De.isObject(e)?(et(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(e){return e>=200&&e<300}};rt.headers={common:{Accept:"application/json, text/plain, */*"}},De.forEach(["delete","get","head"],(function(e){rt.headers[e]={}})),De.forEach(["post","put","patch"],(function(e){rt.headers[e]=De.merge(Qe)}));var nt=rt;function ot(e){e.cancelToken&&e.cancelToken.throwIfRequested()}var it=function(e){return ot(e),e.headers=e.headers||{},e.data=ze(e.data,e.headers,e.transformRequest),e.headers=De.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),De.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||nt.adapter)(e).then((function(t){return ot(e),t.data=ze(t.data,t.headers,e.transformResponse),t}),(function(t){return He(t)||(ot(e),t&&t.response&&(t.response.data=ze(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))},st=function(e,t){t=t||{};var r={},n=["url","method","data"],o=["headers","auth","proxy","params"],i=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],s=["validateStatus"];function a(e,t){return De.isPlainObject(e)&&De.isPlainObject(t)?De.merge(e,t):De.isPlainObject(t)?De.merge({},t):De.isArray(t)?t.slice():t}function u(n){De.isUndefined(t[n])?De.isUndefined(e[n])||(r[n]=a(void 0,e[n])):r[n]=a(e[n],t[n])}De.forEach(n,(function(e){De.isUndefined(t[e])||(r[e]=a(void 0,t[e]))})),De.forEach(o,u),De.forEach(i,(function(n){De.isUndefined(t[n])?De.isUndefined(e[n])||(r[n]=a(void 0,e[n])):r[n]=a(void 0,t[n])})),De.forEach(s,(function(n){n in t?r[n]=a(e[n],t[n]):n in e&&(r[n]=a(void 0,e[n]))}));var c=n.concat(o).concat(i).concat(s),l=Object.keys(e).concat(Object.keys(t)).filter((function(e){return-1===c.indexOf(e)}));return De.forEach(l,u),r};function at(e){this.defaults=e,this.interceptors={request:new Be,response:new Be}}at.prototype.request=function(e){"string"==typeof e?(e=arguments[1]||{}).url=arguments[0]:e=e||{},(e=st(this.defaults,e)).method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var t=[it,void 0],r=Promise.resolve(e);for(this.interceptors.request.forEach((function(e){t.unshift(e.fulfilled,e.rejected)})),this.interceptors.response.forEach((function(e){t.push(e.fulfilled,e.rejected)}));t.length;)r=r.then(t.shift(),t.shift());return r},at.prototype.getUri=function(e){return e=st(this.defaults,e),$e(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},De.forEach(["delete","get","head","options"],(function(e){at.prototype[e]=function(t,r){return this.request(st(r||{},{method:e,url:t,data:(r||{}).data}))}})),De.forEach(["post","put","patch"],(function(e){at.prototype[e]=function(t,r,n){return this.request(st(n||{},{method:e,url:t,data:r}))}}));var ut=at;function ct(e){this.message=e}ct.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},ct.prototype.__CANCEL__=!0;var lt=ct;function dt(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var r=this;e((function(e){r.reason||(r.reason=new lt(e),t(r.reason))}))}dt.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},dt.source=function(){var e;return{token:new dt((function(t){e=t})),cancel:e}};var ht=dt;function pt(e){var t=new ut(e),r=Ae(ut.prototype.request,t);return De.extend(r,ut.prototype,t),De.extend(r,t),r}var mt=pt(nt);mt.Axios=ut,mt.create=function(e){return pt(st(mt.defaults,e))},mt.Cancel=lt,mt.CancelToken=ht,mt.isCancel=He,mt.all=function(e){return Promise.all(e)},mt.spread=function(e){return function(t){return e.apply(null,t)}},mt.isAxiosError=function(e){return"object"==typeof e&&!0===e.isAxiosError};var ft=mt;mt.default=ft;class gt{authProvider=null;client=null;session=null;tournamentId=null;constructor(e){this.authProvider=e}refreshSession=async()=>{this.authProvider.refreshSession(),this.client=this.authProvider.client,this.session=this.authProvider.session};getTourney=async e=>{try{return await this.refreshSession(),await this.client.apiClient.listLeaderboardRecords(this.session,e.tourney_id)}catch(e){return console.error("getTourney failed ["+e.status+":"+e.statusText+"]"),e}};attemptTourney=async e=>{try{await this.refreshSession();let e=await this.client.createSocket(!1,!1),t=(await e.connect(this.session,!1),await e.createMatch());return console.log(t),t}catch(e){return console.error("attemptTourney failed ["+e.status+":"+e.statusText+"]"),e}};postScore=async e=>{};joinTourney=async e=>{try{return await this.refreshSession(),await this.client.joinTournament(this.session,e.tournament_id)}catch(e){return console.error("joinTourney failed ["+e.status+":"+e.statusText+"]"),e}};saveTournamentId=e=>{this.tournamentId=e.tournamentId};getTournamentId=()=>this.tournamentId}class bt{sdkState=O.SDK_STATES.INITIALIZING;tourneyProvider=null;constructor(e){null!=e&&this.useServer(e)}useServer=async(e,t=null)=>{switch(e.type){case O.TOURNEY_SERVER_TYPES.NAKAMA:if(null==t)console.error("no auth provider given. Nakama requires an auth provider.");else{let r=await(async(e,t)=>{let r=new gt(t);return null!=r?(console.log("%c%s","color: blue; background: white;","Nakama Tourney Provider : --- "+e.url+":"+e.port+" ---"),r):(console.error("unable to initialize SDK"),null)})(e,t);null!=r?(this.tourneyProvider=r,this.sdkState=O.SDK_STATES.READY):console.error("unable to initialize nakama tourney provider.")}break;default:console.error("server type not found. Must be one of : "+Object.keys(O.TOURNEY_SERVER_TYPES))}return this.tourneyProvider};getTourney=async e=>await this.tourneyProvider.getTourney(e);attemptTourney=async e=>await this.tourneyProvider.attemptTourney(e);postScore=async e=>await this.tourneyProvider.postScore(e);joinTourney=async e=>await this.tourneyProvider.joinTourney(e);saveTournamentId=e=>{null!=e&&this.tourneyProvider.saveTournamentId(e)};getTournamentId=()=>this.tourneyProvider.getTournamentId()}class _t{client=null;session=null;loginObject=null;constructor(e){this.client=e}login=async e=>{this.loginObject=e;try{return this.session=await this.client.apiClient.authenticateEmail({email:e.username,password:e.password,create:!0}),this.session}catch(e){console.error("Login failed ["+e.status+":"+e.statusText+"]")}return null};logout=()=>{this.session=null,this.loginObject=null};refreshSession=async()=>{null!=this.loginObject?null==this.session?await this.login(this.loginObject):1e3*this.session.expires_at<Date.now()&&(this.client=new Pe(this.client.serverkey,this.client.host,this.client.port),await this.login(this.loginObject)):console.error("previous login not detected -- unable to refresh session")};getSessionToken=()=>(console.log(this.session),this.session);saveSessionToken=e=>{this.session=e}}class yt{sdkState=O.SDK_STATES.INITIALIZING;loginState=O.LOGIN_STATES.LOGGED_OUT;authProvider=null;constructor(e){null!=e&&this.useServer(e)}useServer=async e=>{switch(e.type){case O.AUTH_SERVER_TYPES.NAKAMA:let t=await(async e=>{let t=new Pe(e.key,e.url,e.port);if(null!=await t.apiClient.authenticateCustom({id:"test_id",create:!0})){let r=new _t(t);return console.log("%c%s","color: blue; background: white;","Nakama Auth Provider : --- "+e.url+":"+e.port+" ---"),r}return console.error("unable to initialize SDK"),null})(e);null!=t&&(this.authProvider=t,this.sdkState=O.SDK_STATES.READY);break;default:console.error("server type not found. Must be one of : "+Object.keys(O.AUTH_SERVER_TYPES))}return this.authProvider};login=async e=>{this.loginState=O.LOGIN_STATES.LOGIN_IN_PROGRESS;let t=await this.authProvider.login(e);return this.loginState=null!=t?O.LOGIN_STATES.LOGGED_IN:O.LOGIN_STATES.LOGGED_OUT,this.loginState};logout=()=>(this.authProvider.logout(),this.loginState=O.LOGIN_STATES.LOGGED_OUT,this.loginState);getSessionToken=()=>this.authProvider.getSessionToken();saveSessionToken=e=>(null!=e&&(this.authProvider.saveSessionToken(e),this.loginState=O.LOGIN_STATES.LOGGED_IN),this.loginState)}const vt=N(O.LOGIN_STATES.LOGGED_OUT),wt=N(null),kt=N(null),St=N(null),Tt={subscribe:N(document.referrer,Et).subscribe};var Et;const xt=N(!1),Ot=N(!1),Ct=N(new bt(Nt));var Nt;const It=function(e){return N(new yt(e))}();async function Pt(e){let t=await a(It).useServer(e.auth_server);return{auth_provider:t,tourney_provider:await a(Ct).useServer(e.tourney_server,t)}}function At(e,t,r){let n,o,i,s,l,d,h,p;u(e,Tt,(e=>r(15,n=e))),u(e,xt,(e=>r(16,o=e))),u(e,wt,(e=>r(17,i=e))),u(e,vt,(e=>r(18,s=e))),u(e,kt,(e=>r(19,l=e))),u(e,Ot,(e=>r(20,d=e))),u(e,Ct,(e=>r(21,h=e))),u(e,It,(e=>r(22,p=e)));const m=["http://localhost:3000","http://test.outplay.games","http://alpha.outplay.games","http://op-arcade-dev.herokuapp.com","http://op-arcade-alpha.herokuapp.com","http://op-arcade-prod.herokuapp.com"],f={tourney_server:{type:O.TOURNEY_SERVER_TYPES.NAKAMA,url:"localhost",port:"7350",key:"defaultkey"},auth_server:{type:O.TOURNEY_SERVER_TYPES.NAKAMA,url:"localhost",port:"7350",key:"defaultkey"}};let{config:g}=t;const b=N(g);function _(){null===i?console.log("no session token passed"):(c(vt,s=function(e){return p.saveSessionToken(e)}(i),s),c(kt,l=function(e){return h.saveTournamentId(e)}(i),l),null!==l&&c(Ot,d=!0,d))}return window.addEventListener("message",(e=>{if(m.includes(e.origin))try{let t=JSON.parse(e.data);console.log(t),X(t.playServerUrl,t.playSessionId),St.set(t.apiUrl),wt.set(t),_()}catch(e){console.log(e)}}),!1),e.$$set=e=>{"config"in e&&r(1,g=e.config)},[f,g,b,O,V,Pt,function(){return{url:n,config:g}},async function(){let e=a(b);null==e&&(console.log("%c%s","color: blue; background: white;","-- Using default localhost config --"),e=f),xt.set(m.includes(n.slice(0,-1))),console.log("%c%s","color: orange; background: white;","-- Welcome to OP Arcade --"),Pt(e).then((e=>{o&&_()}))},async function(e){return await h.getTourney(e)},async function(){undefined()},async function(e){return await h.attemptTourney(e)},async function(e){let t=await h.postScore(e);return window.top.postMessage("postScore","*"),t},async function(e){return await h.joinTourney(e)},function(){return p.getSessionToken()},function(){return h.getTournamentId()}]}let Ft=null;try{let e=document.getElementsByName("op-config")[0];null!=e&&(Ft=JSON.parse(e.content))}catch(e){console.log("unable to process op-config -- check if valid json")}const Rt=new class extends class{$destroy(){!function(e,t){const r=e.$$;null!==r.fragment&&(n(r.on_destroy),r.fragment&&r.fragment.d(t),r.on_destroy=r.fragment=null,r.ctx=[])}(this,1),this.$destroy=e}$on(e,t){const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(t),()=>{const e=r.indexOf(t);-1!==e&&r.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}{constructor(e){super(),x(this,e,At,null,i,{DEFAULT_CONFIG:0,config:1,configStore:2,CONSTANTS:3,remotePlay:4,useServers:5,props:6,initialize:7,getTourney:8,loginPrompt:9,attemptTourney:10,postScore:11,joinTourney:12,getSessionToken:13,getTournamentId:14})}get DEFAULT_CONFIG(){return this.$$.ctx[0]}get configStore(){return this.$$.ctx[2]}get CONSTANTS(){return O}get remotePlay(){return V}get useServers(){return Pt}get props(){return this.$$.ctx[6]}get initialize(){return this.$$.ctx[7]}get getTourney(){return this.$$.ctx[8]}get loginPrompt(){return this.$$.ctx[9]}get attemptTourney(){return this.$$.ctx[10]}get postScore(){return this.$$.ctx[11]}get joinTourney(){return this.$$.ctx[12]}get getSessionToken(){return this.$$.ctx[13]}get getTournamentId(){return this.$$.ctx[14]}}({target:document.body,props:{config:Ft}});return Rt.initialize(),window.op=Rt,Rt}));
//# sourceMappingURL=op.js.map
